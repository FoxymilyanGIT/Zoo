## ZooPark ‚Äî –∫—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç (monorepo)

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–°–∞–π—Ç –∑–æ–æ–ø–∞—Ä–∫–∞¬ª —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º –∂–∏–≤–æ—Ç–Ω—ã—Ö, —Å–æ–±—ã—Ç–∏—è–º–∏, –ø–æ–∫—É–ø–∫–æ–π/–±—Ä–æ–Ω—å –±–∏–ª–µ—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å—é. –ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –±–µ–∑ Docker: backend –Ω–∞ Spring Boot + PostgreSQL, frontend –Ω–∞ React (Vite).

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü—É–±–ª–∏—á–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∂–∏–≤–æ—Ç–Ω—ã—Ö —Å –ø–æ–∏—Å–∫–æ–º/—Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ —Å –≥–∞–ª–µ—Ä–µ–µ–π –∏ –∫–∞—Ä—Ç–æ–π –≤–æ–ª—å–µ—Ä–æ–≤ (Leaflet).
- –ù–æ–≤–æ—Å—Ç–∏ –∑–æ–æ–ø–∞—Ä–∫–∞, —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π/–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —É—á–µ—Ç–æ–º –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥ –ø–æ JWT, —Ä–æ–ª–∏ `user`/`admin`), —Å–ø–∏—Å–æ–∫ –ª–∏—á–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤.
- –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ (—ç–º—É–ª—è—Ü–∏—è –æ–ø–ª–∞—Ç—ã) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Å–æ–±—ã—Ç–∏—é.
- –ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å c –∑–∞—â–∏—Ç–æ–π –ø–æ —Ä–æ–ª–∏ –¥–ª—è CRUD –∂–∏–≤–æ—Ç–Ω—ã—Ö, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ —Å–æ–±—ã—Ç–∏–π + –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.
- REST API —Å OpenAPI/Swagger (`/swagger-ui.html`), Flyway –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed‚Äë–¥–∞–Ω–Ω—ã–µ (10 –∂–∏–≤–æ—Ç–Ω—ã—Ö, 3 —Å–æ–±—ã—Ç–∏—è, admin/user).
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã: JUnit + Testcontainers (backend), Jest + React Testing Library (frontend).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- `backend/` ‚Äî Spring Boot —Å–µ—Ä–≤–∏—Å (Web, Data JPA, Security + JWT, Flyway, PostgreSQL, springdoc-openapi).
- `frontend/` ‚Äî Vite + React + TailwindCSS SPA (React Router v7, React Context, Formik+Yup, Leaflet, i18n RU/EN).
- `sql/migrations/` ‚Äî —Ç–µ –∂–µ SQL-–º–∏–≥—Ä–∞—Ü–∏–∏, –≤—ã–Ω–µ—Å–µ–Ω–Ω—ã–µ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/–∏–º–ø–æ—Ä—Ç–∞.
- `seed/` ‚Äî JSON-—Ñ–∞–π–ª—ã —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ + README.
- `.github/workflows/ci.yml` ‚Äî GitHub Actions (backend build/test + frontend build/test).
- `uploads/` ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ (dev) —Å `.gitkeep`.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Java 17**, **Maven 3.9+**
- **Node.js 20.19.x** (–∏–ª–∏ ‚â• 22.12) –∏ **npm 10+**
- **PostgreSQL 15+**
- Git, cURL (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `zoopark` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```sql
CREATE DATABASE zoopark;
CREATE USER zoouser WITH PASSWORD 'zoopassword';
GRANT ALL PRIVILEGES ON DATABASE zoopark TO zoouser;
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä `.env` (—Å–º. –Ω–∏–∂–µ) –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã.

#### Backend (`backend/src/main/resources/application.yml`)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|------------|------------------------|
| `SPRING_DATASOURCE_URL` | JDBC —Å—Ç—Ä–æ–∫–∞ | `jdbc:postgresql://localhost:5432/zoopark` |
| `SPRING_DATASOURCE_USERNAME` | –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `zoouser` |
| `SPRING_DATASOURCE_PASSWORD` | –ø–∞—Ä–æ–ª—å –ë–î | `zoopassword` |
| `ZOOPARK_JWT_SECRET` | —Å–µ–∫—Ä–µ—Ç –¥–ª—è JWT (–º–∏–Ω–∏–º—É–º 32 –±–∞–π—Ç–∞) | `changeme-secret-please-change-32bytes` |
| `ZOOPARK_JWT_EXPIRATION-SECONDS` | TTL —Ç–æ–∫–µ–Ω–∞ | `3600` |
| `ZOOPARK_UPLOADS_DIR` | –ø–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ | `uploads` |

#### Frontend (`frontend/.env.local`)

```
VITE_API_URL=http://localhost:8080
```

### 3. –ó–∞–ø—É—Å–∫ backend

```bash
cd backend
mvn clean install
mvn spring-boot:run
```

- Flyway –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç –ë–î (10 –∂–∏–≤–æ—Ç–Ω—ã—Ö, 2 –Ω–æ–≤–æ—Å—Ç–∏, 3 —Å–æ–±—ã—Ç–∏—è).
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `DataInitializer` —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
  - `admin@example.com / Passw0rd!`
  - `user@example.com / User1234!`
- Swagger UI: http://localhost:8080/swagger-ui.html

### 4. –ó–∞–ø—É—Å–∫ frontend

```bash
cd frontend
npm install
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:5173. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–±–æ—Ä–∫–∏ `npm run build`. –¢–µ—Å—Ç—ã ‚Äî `npm test`.

> ‚ö†Ô∏è Vite 7 —Ç—Ä–µ–±—É–µ—Ç Node **20.19+** –∏–ª–∏ **‚â•22.12**. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π Windows —Å—Ç–æ–∏—Ç 22.11, –ø–æ—ç—Ç–æ–º—É –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –æ–¥–Ω–∞–∫–æ —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (—Å–º. —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã).

### 5. Seed-–¥–∞–Ω–Ω—ã–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é

- –û—Å–Ω–æ–≤–Ω–æ–π seed –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `backend/src/main/resources/db/migration/V1__init_schema_and_seed.sql`.
- –ö–æ–ø–∏—è –≤ `sql/migrations/` —É–ø—Ä–æ—â–∞–µ—Ç –∏–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ `psql` –∏–ª–∏ GUI.
- –ß–∏—Ç–∞–µ–º—ã–µ JSON-—Ñ–∞–π–ª—ã –≤ `seed/` (animals/events/users) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤.

---

## API (–æ—Å–Ω–æ–≤–Ω—ã–µ endpoints)

- `POST /api/auth/register`, `POST /api/auth/login` ‚Üí JWT
- `GET /api/animals`, `GET /api/animals/{id}` (+ `q`, `species`, `zone`, `status`, `page`, `size`)
- `POST /api/animals`, `PUT /api/animals/{id}`, `DELETE /api/animals/{id}` ‚Äî —Ç–æ–ª—å–∫–æ admin
- `GET /api/news` + admin CRUD
- `GET /api/events`, `GET /api/events/{id}`, `POST /api/events/{id}/register` (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- `POST /api/events`, `PUT /api/events/{id}`, `DELETE /api/events/{id}` ‚Äî —Ç–æ–ª—å–∫–æ admin
- `POST /api/tickets` ‚Äî –ø–æ–∫—É–ø–∫–∞/–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, `GET /api/tickets`, `GET /api/tickets/{id}`
- `POST /api/uploads` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (admin), —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `uploads/`

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (cURL):

```bash
# –ª–æ–≥–∏–Ω
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"Passw0rd!"}'

# —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
curl -X POST http://localhost:8080/api/events/1/register \
  -H "Authorization: Bearer <JWT>"

# –ø–æ–∫—É–ø–∫–∞ 2 –±–∏–ª–µ—Ç–æ–≤ –±–µ–∑ —Å–æ–±—ã—Ç–∏—è
curl -X POST http://localhost:8080/api/tickets \
  -H "Authorization: Bearer <JWT>" \
  -H "Content-Type: application/json" \
  -d '{"quantity":2}'
```

---

## –¢–µ—Å—Ç—ã –∏ CI

- **Backend:** `mvn test` (JUnit + MockMvc + Testcontainers PostgreSQL). –¢—Ä–µ–±—É–µ—Ç—Å—è Docker (–ª–æ–∫–∞–ª—å–Ω–æ) –∏–ª–∏ GitHub Runner.
- **Frontend:** `npm test` (Jest + React Testing Library) + `npm run build`.
- **CI:** `.github/workflows/ci.yml` –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
  - Backend: `mvn -pl backend -am clean verify`
  - Frontend: `npm ci`, `npm run test`, `npm run build`

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –ü–∞—Ä–æ–ª–∏ –≤—Å–µ–≥–¥–∞ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ BCrypt, JWT —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –û–ø–ª–∞—Ç–∞ –±–∏–ª–µ—Ç–æ–≤ –∏–º–∏—Ç–∏—Ä—É–µ—Ç—Å—è: endpoint –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –∫–æ–¥ –±–∏–ª–µ—Ç–∞.
- Leaflet –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –Ω–∞ –∫–∞—Ä—Ç–µ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏-–∑–∞–≥–ª—É—à–∫–∞–º–∏.
- i18n: –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å RU/EN —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —Å–ø—Ä–∞–≤–∞ –≤ —à–∞–ø–∫–µ.
- –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∞–¥–º–∏–Ω–∫–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å URL. –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `uploads/` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `/uploads/**`.

---



–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É: `npm run dev` (frontend) + `mvn spring-boot:run` (backend).üêæ

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Railway (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ [Railway.app](https://railway.app).

### –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway** –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–î–æ–±–∞–≤—å—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Railway Dashboard
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `JWT_SECRET`: —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
   - `JWT_EXPIRATION_SECONDS`: 3600
   - `UPLOADS_DIR`: uploads
4. **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞** (backend + frontend)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [RAILWAY_DEPLOYMENT.md](RAILWAY_DEPLOYMENT.md)

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: [RAILWAY_ENV_VARS.md](RAILWAY_ENV_VARS.md)

### –í–∞—Ä–∏–∞–Ω—Ç 2: Vercel (frontend) + Railway/Heroku (backend)

–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ frontend –Ω–∞ Vercel:

1. **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ backend** –Ω–∞ Railway –∏–ª–∏ Heroku (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤—ã—à–µ)
2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç** –Ω–∞ [Vercel](https://vercel.com)
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:**
   - `VITE_API_URL`: URL –≤–∞—à–µ–≥–æ backend (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://your-backend.railway.app`)
4. **Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä–µ—Ç –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç** frontend

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ `vercel.json`. –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è: `FRONTEND_ENV_EXAMPLE.txt`
